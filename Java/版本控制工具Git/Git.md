# 版本控制工具Git

## Git和SVN的对比

### SVN

SVN是集中式版本控制系统，版本库是集中放在中央服务器的，而开发人员工作的时候，用的都是自己的电脑，所以首先要从中央服务器下载最新的版本。然后开发，开发完成后，需要把自己最新的代码提交到中央服务器。

**缺点：**

- 服务器单点故障，将会导致所有的人员无法工作
- 服务器硬盘损坏，可能失去了该项目的所有历史记录，这是毁灭性的

### Git

Git是在2005年，Linux系统的创建者，为了帮助全球的开发者，维护Linux系统内核的开发，而开发了自己的开源分布式版本控制工具，分为两种类型的仓库：

<span style="color:red">本地仓库</span> 和  <span style="color:red">远程仓库</span>

**开发中的麻烦**

- 代码备份很重要
- 版本控制很重要
- 协同工作很重要
- 责任追溯很重要

#### Git下载

> https://git-scm.com/

得到安装包以后，直接安装，一路next

#### 安装图形化工具 TortoiseGit

> https://tortoisegit.org/download/

先下载安装包进行安装，然后安装语言包，进行汉化。

全都next就可以了。



#### Git入门操作

##### Git基本工作流程

- 本地仓库
- 远程仓库

##### 本地仓库

- 工作目录： 代码存放的位置，代码经常发生变动
- 本地历史仓库： 存放不同版本的代码，例如：（完成了项目10%和20%的代码）

- 暂存区： 代码提交到仓库前的临时存储空间

先将工作目录中的代码提交到暂存区，然后才提交到历史仓库

##### Git常用命令

|                    命令                     |                        作用                         |
| :-----------------------------------------: | :-------------------------------------------------: |
|                  git init                   |             初始化，创建一个新的git仓库             |
|                 git status                  | 查看当前git仓库的状态（文件是否进行了添加，提交等） |
|                   git add                   |            添加，将指定文件添加到暂存区             |
|         git commit -m “提交的信息”          |        提交，将暂存区文件提交到本地历史仓库         |
|                   git log                   |          查看日志（git 的提交的历史日志）           |
| **<span style="color:red">高级用法</span>** |       **<span style="color:red">作用</span>**       |
|                 git reflog                  |             查看所有分支的所有操作记录              |
|       git reset --hard 版本唯一索引值       |                回退到项目指定的版本                 |

##### 历史版本切换

- 准备动作：
  1. 查看 项目的 log 日志
     - git reflog： 可以查看所有分支的所有操作记录（包括已经被删除的 commit 记录的操作）
  2. 增加一次新的修改记录

##### Git分支管理

**分支：**每次提交的代码，串成的一条时间线。

分支使用场景：

 1. 周期较长的模块开发

 2. 尝试性的模块开发

    业务人员提出了一个需要，经过我们的思考和分析

    该需求应该可以用技术手段实现

    但是我们还不确定，就可以建立一个分支基于分支进行尝试性开发

**使用分支意味着可以把工作从开发主线上分离出来，以免影响开发主线**

|           命令           |               作用               |
| :----------------------: | :------------------------------: |
|   git branch 分支名称    |         创建一个新的分支         |
|  git checkout 分支名称   |         切换到指定的分支         |
| git checkout -b 分支名称 | 创建一个新分支，并切换到该分支上 |
|    git merge 分支名称    | 将指定分支的代码合并到当前分支上 |
|  git branch -d 分支名称  |          删除指定的分支          |

##### 远程仓库工作原理

推送 push ： 推送本地仓库内容到远程仓库

拉取 pull： 更新远程仓库中的内容到本地仓库（和克隆不一样，拉取只下载代码发生改变的）

克隆 clone ： 将远程仓库的代码全都复制到本地



- 创建远程仓库
- 生成SSH公匙步骤
  - 设置Git账户
  - 生成SSH公匙
  - 设置账户公匙
  - 公匙测试

|                   命令                    |              作用               |
| :---------------------------------------: | :-----------------------------: |
|           git config user.name            |         查看Git账户名称         |
|           git config user.email           |         查看git账户邮箱         |
| git config --global user.name “用户名称”  |        全局设置账户名称         |
| git config --global user.email “用户邮箱” |          全局设置邮箱           |
|        ssh-keygen -t rsa -C “邮箱”        | 生成ssh公匙，连续按下三次回车键 |
|           ssh -T git@gitee.com            | 出现 successfully 表示配置成功  |

- 推送到远程仓库

  步骤：

  - 为远程仓库的URL（网址），自定义仓库名称（一般习惯为 origin ）
  - 推送

|                  命令                   |                             作用                             |
| :-------------------------------------: | :----------------------------------------------------------: |
| git remote add origin(别名) 远程仓库URL |                  本地仓库和远程仓库建立联系                  |
|      git push -u 仓库名称 分支名称      | 第一次推送代码到远程仓库的时候，需要加上参数 -u ，第一次推送到某个分支上，也需要这个参数，第二次推送就不需要了 |
|           git clone 仓库地址            |               将远程仓库的代码，克隆到本地仓库               |
|       git pull 远程仓库名  分支名       |                         项目拉取更新                         |

**代码冲突问题：**

1. 修改冲突行，保存，即可解决冲突
2. 重新add冲突文件并commit到本地仓库，重新push到远程仓库

